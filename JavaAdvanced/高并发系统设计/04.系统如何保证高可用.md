# 系统如何保证高可用

------

## 本节概述

- 了解如何度量系统的可用性
- 了解在做高并发系统设计时如何来保证高可用

## 主要内容

什么是高可用性（High Availability，HA），它指的是系统具备较高的无故障运行的能力。

#### 可用性度量

##### MTBF

MTBF（Mean Time Between Failure）是平均故障间隔的意思，代表两次故障的间隔时间，也就是系统正常运转的平均时间。这个时间越长，系统稳定性越高。

##### MTTR

MTTR（Mean Time To Repair）表示故障的平均恢复时间，也可以理解为平均故障时间。这个值越小，故障对于用户的影响越小。

可用性与 MTBF 和 MTTR 的值息息相关，我们可以用下面的公式表示它们之间的关系：
$$
Availability = MTBF / (MTBF + MTTR)
$$
这个公式计算出的结果是一个比例，而这个比例代表着系统的可用性。一般来说，我们会使用几个九来描述系统的可用性。

<img src="picture/04.%E7%B3%BB%E7%BB%9F%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%AB%98%E5%8F%AF%E7%94%A8/image-20210427180027305.png" alt="image-20210427180027305" style="zoom:23%;" />

四个九的可用性，需要建立完善的运维值班体系、故障处理流程和业务变更流程。

五个九，这个级别的可用性考察的是系统的容灾和自动恢复能力，让机器来处理故障，才会让可用性指标提升一个档次。

一般来说，我们的核心业务系统的可用性，需要达到四个九，非核心系统的可用性最多容忍到三个九。在实际工作中，你可能听到过类似的说法，只是不同级别，不同业务场景的系统对于可用性要求是不一样的。



#### 高可用系统的设计思路

一个成熟系统的可用性需要从系统设计和系统运维两方面来做保障，两者共同作用，缺一不可。

##### 系统设计

我们在做系统设计的时候，要把发生故障作为一个重要的考虑点，预先考虑如何自动化地发现故障，发生故障之后要如何解决。比如一些具体的优化方法：failover（故障转移）、超时控制以及降级和限流。



##### 系统运维









## 本节总结

1. 

## 知识拓展

### 相关文章推荐

### 知识点拓展



