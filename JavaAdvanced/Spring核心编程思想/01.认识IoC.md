# 认识IoC

------

## 本节概述

- 大致了解一下 IoC 

## 主要内容

#### 什么是IoC

IoC是反转控制，类似于好莱坞原则（don't call us,we'll call you），主要有依赖查找和依赖注入两种实现。

#### IoC主要实现策略

**依赖查找**是主动或手动的依赖查找方式，通常需要依赖容器或标准API实现。

**依赖注入**则是收到或自动依赖绑定的方式，无需依赖特定的容器和API。

##### 主要实现

- Java SE
    - Java Beans
        - 特性
            - 依赖查找
            - 生命周期管理
            - 配置元信息（关于反射以及相关的反射所对应的应用）
            - 事件
            - 自定义（对方法和字段进行补充性的说明）
            - 资源管理
            - 持久化（可以持久到本地或者一些相关的一个可持久化的资源，可以进行临时存储和恢复）
    - Java ServiceLoader SPI
    - JNDI（Java Naming and Directory Interface）
- Java EE
    - EJB （Enterprise Java Beans）
    - Servlet



#### IoC容器的职责

- 依赖处理（依赖是怎么来的，如何返回给客户端进行处理的）

    - 依赖查找

        主动的方式

    - 依赖注入

        虽然也有主动的方式，但是大多数工作都被容器给完成了

    - 两者的优劣对比

        |   类型   |    依赖处理    | 实现便利性 |  代码侵入性  |   API依赖性    | 可读性 |
        | :------: | :------------: | :--------: | :----------: | :------------: | :----: |
        | 依赖查找 | 主动获取（拉） |  相对繁琐  | 侵入业务逻辑 |  依赖容器 API  |  良好  |
        | 依赖注入 | 被动提供（推） |  相对便利  |   低侵入性   | 不依赖容器 API |  一般  |

- 生命周期管理

    - 容器

        容器有自己的启动、停止、暂停、终止或者回滚等操作

    - 托管的资源（Java Beans 或其他资源）

- 配置

    - 容器

        控制容器的一个行为

    - 外部化配置

        属性配置、或者一些 XML 配置

    - 托管的资源（Java Beans 或其他资源）

        Spring Boot 通过嵌入的方式，由 Spring 上下文影响到容器

        Spring MVC 是容器影响到 Spring MVC



## 本节总结

1. 什么是 IoC？

    IoC 是反转控制，类似于好莱坞原则，主要有依赖查找和依赖注入两种实现方式。

    按照 IoC 定义，很多方面都是 IoC。比如，JavaBeans 是 IoC 的一个容器实现，Servlet 的容器也是 IoC 的实现，因为 Servlet 可以去依赖或者反向地通过 JNDI 的方式得到一些外部的资源，包括 DataSource 或者相关的 EJB 的组件。另外，像 Spring Framework 或者 Peak Container 的依赖注入的框架，也能够帮助实现 IoC。从反转控制考虑，消息其实也算 IoC，因为消息是被动的。在消息事件以及各种类似于这种反向的观察者模式的扩展都属于 IoC 。

2. 依赖查找和依赖注入的区别？

    - 方式

        依赖查找是主动或手动的依赖查找方式，通常需要依赖容器或标准 API 实现。（显现的调用 API 的方式去获取想要的资源和数据）

        依赖注入则是手动或自动依赖绑定的方式，无需特定的容器和 API。

    - 便利性

        依赖注入更便利

3. Spring 作为 IoC 容器有什么优势？

    - 典型的 IoC 管理，依赖注入和依赖查找
    - AOP 抽象
    - 事务抽象（是对 Java EE 传统的事务做了一层封装）
    - 事件机制（ApplicationListener）
    - SPI 机制（BeanPostProcessor、BeanFactoryPostProcessor）
    - 强大的第三方整合
    - 易测试性（Spring-Test 模块中提供了集成测试和单元测试，其中，单元测试在web场景和非web场景都提供了模拟对象 Mock Object，这种模拟对象可以帮助我们测试一些复杂的结构，比如 ServletRequest 接口或 ServletContext 接口）
    - 更好的面向对象（Spring 里面使用了非常多的设计模式比如代理模式、适配器模式）



## 知识拓展

### 相关文章推荐

### 知识点拓展

