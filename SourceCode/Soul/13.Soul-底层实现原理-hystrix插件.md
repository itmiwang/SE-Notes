# Soul-底层实现原理-hystrix插件

------

## 本节概述

- 熟悉 `soul` 的 `hystrix` 插件

## 主要内容

首先，我们先查看官方文档中对于 `hystrix` 插件的相关描述。`hystrix` 插件是网关用来对流量进行熔断的核心实现。是使用信号量的方式处理请求的。

关于 hystrix 处理详解，`soul` 官方文档在插件集合-Hystrix插件中介绍如下：

```
Hystrix处理详解：
	跳闸最小请求数量 ：最小的请求量，至少要达到这个量才会触发熔断
	错误百分比阀值 ： 这段时间内，发生异常的百分比。
	最大并发量 ： 最大的并发量
	跳闸休眠时间(ms) ：熔断以后恢复的时间。
	分组Key： 一般设置为:contextPath
	命令Key: 一般设置为具体的 路径接口。
```

接着，我们修改一下 soul-bootstrap 项目的配置，在网关中引入 hystrix 依赖。

```xml
<!-- soul hystrix plugin start-->
<dependency>
    <groupId>org.dromara</groupId>
    <artifactId>soul-spring-boot-starter-plugin-hystrix</artifactId>
    <version>${project.version}</version>
</dependency>
<!-- soul hystrix plugin end-->
```

我们先正常启动 `soul-admin`，`soul-bootstrap` 和 `soul-examples-http`，具体可参考 [soul-examples-http体验](https://github.com/itmiwang/SE-Notes/blob/main/SourceCode/Soul/03.soul-examples-http%E4%BD%93%E9%AA%8C.md)。然后我们一起学习一下 `hystrix` 插件。

在管理后台开启 `hystrix` 插件。

![image-20210205062307123](picture/13.Soul-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-hystrix%E6%8F%92%E4%BB%B6/image-20210205062307123.png)



添加选择器配置

![image-20210205063128081](picture/13.Soul-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-hystrix%E6%8F%92%E4%BB%B6/image-20210205063128081.png)

配置选择器下的规则

![image-20210205071732483](picture/13.Soul-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-hystrix%E6%8F%92%E4%BB%B6/image-20210205071732483.png)

此处，我们再贴一次 Hystrix 处理详解，方便大家比对查看。

```
Hystrix处理详解：
	跳闸最小请求数量 ：最小的请求量，至少要达到这个量才会触发熔断
	错误百分比阀值 ： 这段时间内，发生异常的百分比。
	最大并发量 ： 最大的并发量
	跳闸休眠时间(ms) ：熔断以后恢复的时间。
	分组Key： 一般设置为:contextPath
	命令Key: 一般设置为具体的 路径接口。
```



## 问题记录

操作触发熔断一直没成功，后续继续研究

## 知识拓展

### 相关文章推荐

### 知识点拓展

